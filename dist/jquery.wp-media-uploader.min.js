if("undefined"==typeof jQuery)throw new Error("Wordpress Media Gallery requires jQuery");!function($){"use strict";$.fn.mediaUploader=function(options){var self=this;self.settings=$.extend({editor:void 0,render:!0,clearTemplate:!0,clearTarget:!0,target:void 0,success:void 0,template:void 0},options),self._getTemplate=function(){void 0==self.settings.template&&(self.settings.template=$(self).html(),self.settings.clearTemplate&&$(self).html(""))},self._render=function(media){self.settings.render&&void 0!=self.settings.target&&$(self.settings.target).length>0&&(self.settings.clearTarget&&$(self.settings.target).html(""),$.each(media,function(i){$(self.settings.target).append(self._parseMedia(this))}))},self._parseMedia=function(media){if(void 0==self.settings.template)return"";var html=self.settings.template;return $.each(media,function(key){html=html.replace(new RegExp("{{"+key+"}}","g"),media[key],html),html=html.replace(new RegExp("{{ "+key+" }}","g"),media[key],html)}),html=$(html),"file"==media.type&&$(html).find("img").length>0&&$(html).find("img").remove(),"image"==media.type&&$(html).find("img").length>0&&$(html).find("img").attr("src",media.url),html},self._parseEditorHTML=function(html){var media=[];$.each($(html),function(index){$(this).find("img").length>0?media.push({type:"image",url:$(this).find("img").attr("src"),alt:$(this).find("img").attr("alt"),id:$(this).find("img").attr("class").replace(/[A-Za-z\-\s]/g,"")}):$(this).is("img")?media.push({type:"image",url:$(this).attr("src"),alt:$(this).attr("alt"),id:$(this).attr("class").replace(/[A-Za-z\-\s]/g,"")}):void 0!=$(this).attr("href")&&media.push({type:"file",url:$(this).attr("href")})}),self._render(media),void 0!=self.settings.success&&self.settings.success(media)},window.send_to_editor=function(html){void 0!=self.settings.editor&&this.activeEditor==self.settings.editor&&self._parseEditorHTML(html)},self._getTemplate()}}(jQuery);