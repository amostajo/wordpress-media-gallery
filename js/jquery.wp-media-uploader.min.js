/* Wordpress Media Uploader */
if("undefined"==typeof jQuery)throw new Error("Wordpress Media Gallery requires jQuery");!function(t){"use strict";t.fn.mediaUploader=function(e){var i=this;i.settings=t.extend({editor:void 0,render:!0,clearTemplate:!0,clearTarget:!0,target:void 0,success:void 0,template:void 0},e),i._getTemplate=function(){void 0==i.settings.template&&(i.settings.template=t(i).html(),i.settings.clearTemplate&&t(i).html(""))},i._render=function(e){i.settings.render&&void 0!=i.settings.target&&t(i.settings.target).length>0&&(i.settings.clearTarget&&t(i.settings.target).html(""),t.each(e,function(e){t(i.settings.target).append(i._parseMedia(this))}))},i._parseMedia=function(e){if(void 0==i.settings.template)return"";var r=i.settings.template;return t.each(e,function(t){r=r.replace(new RegExp("{{"+t+"}}","g"),e[t],r),r=r.replace(new RegExp("{{ "+t+" }}","g"),e[t],r)}),r=t(r),"file"==e.type&&t(r).find("img").length>0&&t(r).find("img").remove(),"image"==e.type&&t(r).find("img").length>0&&t(r).find("img").attr("src",e.url),r},i._parseEditorHTML=function(e){var r=[];t.each(t(e),function(e){t(this).find("img").length>0?r.push({type:"image",url:t(this).find("img").attr("src"),alt:t(this).find("img").attr("alt"),id:t(this).find("img").attr("class").replace(/[A-Za-z\-\s]/g,"")}):void 0!=t(this).attr("href")&&r.push({type:"file",url:t(this).attr("href")})}),i._render(r),void 0!=i.settings.success&&i.settings.success(r)},window.send_to_editor=function(t){void 0!=i.settings.editor&&this.activeEditor==i.settings.editor&&i._parseEditorHTML(t)},i._getTemplate()}}(jQuery);